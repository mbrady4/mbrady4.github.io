+++
title = "Class Components"

date = 2020-10-14T00:00:00
lastmod = 2020-10-14T00:00:00
draft = false
reading_time = false
authors = ["Michael W. Brady"]
+++
Class components have been a big part of the React ecosystem because they brought a lot of functionality that we normally didn’t get with the React API when using function components. Now with hooks, that functionality is available in function components. However, a LOT of projects will still have class components in them, and we need to be prepared to work with classes when we see them.

## Class Component

Same as JS classes. We extend the *base* React Class from the react library. The base class gives us a bunch of functionality. 

Declare your class component by extending the React.Component parent class. class FooComponent extends React.Component {}. Use the constructor function to set up some state. because we’re calling extends, we also need to call super(); otherwise we won’t have access the this We need to render some sort of UI to the DOM. We do this by calling the life-cycle method render.

```jsx
class App extends React.Component { // declease your class
  constructor() { // build out your constructor
    super(); // Always need this since we are extending a component
    this.state = {};
  }
  render() { // call render
    return <div>Hello From App!</div>;
  }
}
```

## State in Classes

- State can be/should be set up on the constructor function.
- We can create, read, delete, and update state
- When state updates, render gets called again.
- What state that has been passed around changes, the props change too.
- State is an object that we can reference on the *this* keyword
- It is as persistent in memory as your component. So as long as the component is mounted, so too will your state be.
- State can be changed via the `setState` method
- When state changes, our `render` method gets called again

## Events

- The event object (generated by the DOM) is wrapped inside of a synthetic Event object in React. Events are completely custom in React. Meaning they don't have to rely on the web browser and the React implementation controls how events work.

## Simple Class Example

```jsx
import React from "react";
import ReactDOM from "react-dom";

import "./styles.css";

class App extends React.Component {
  constructor() {
    super();
    this.state = {
      message: ''
    }
  }

  handleSingleClickEvent = () => alert('Single Click Event Triggered');
  
  handleDoubleClickEvent = () => alert('Double Click event triggered');

  handleMouseEnter = () => alert('Mouse enter event triggered');

  hadnleMouseLeave = () => alert('Mouse leave event triggered');

  handleInputChange = event => {
    this.setState({message: event.target.value});
  }
  render() {
    return (
      <div className="App">
        <h1>Hello Handlers</h1>
        <h2>Lets build out some handler functions.</h2>
        <button onClick={this.handleSingleClickEvent}>Single Click Handler Demo</button>
        <button onDoubleClick={this.handleDoubleClickEvent}>Double Click Handler</button>
        <div onMouseEnter={this.handleMouseEnter}>Mouse Enter</div>
        <div onMouseLeave={this.hadnleMouseLeave}>Mouse Leave</div>
        <input placeholder="Change my input" onChange={this.handleInputChange}/>
        <h3>{this.state.message}</h3>
      </div>
    );
  }
}

const rootElement = document.getElementById("root");
ReactDOM.render(<App />, rootElement);
```

# Converting a Function to a Class

You can convert a function component to a class in five steps:

1. Create an [ES6 class](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Classes), with the same name, that extends `React.Component`.
2. Add a single empty method to it called `render()`.
3. Move the body of the function into the `render()` method.
4. Replace `props` with `this.props` in the `render()` body.
5. Delete the remaining empty function declaration.

The render method will be called each time an update happens, but as long as we render `<Component />` into the same DOM node, only a single instance of the `Component` class will be used. This lets us use additional features such as local state and lifecycle methods.